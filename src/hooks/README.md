# 图片预加载功能说明

## 功能概述

为 Cases 组件添加了智能图片预加载功能，可以在用户还没看到图片位置时提前加载图片，提升用户体验。

## 实现特点

### 1. 智能触发时机

- 使用 `Intersection Observer` API 监测组件是否即将进入视口
- 当组件距离视口 300px 时开始预加载，避免过早消耗带宽
- 只在需要时才启动预加载，节省资源

### 2. 性能优化

- 使用 `requestIdleCallback` 在浏览器空闲时进行预加载
- 设置低优先级 (`loading='lazy'`) 避免阻塞重要资源
- 批量预加载所有行业图片，而不是逐个加载

### 3. 用户体验增强

- 图片预加载完成后有平滑的透明度过渡效果
- 添加了预加载状态指示器（蓝色脉冲点，仅在调试时可见）
- 预加载失败时有完善的错误处理

## 相关文件

### 新增 Hooks

1. **`/src/hooks/useImagePreloader.ts`**

   - 核心图片预加载逻辑
   - 支持配置延迟时间、优先级和启用状态
   - 返回加载状态和检查函数

2. **`/src/hooks/useIntersectionObserver.ts`**
   - 封装 Intersection Observer API
   - 监测元素是否即将进入视口
   - 支持配置触发阈值和边距

### 修改的组件

1. **`/src/components/sections/Cases.tsx`**
   - 集成了两个新的 hooks
   - 添加了图片预加载逻辑
   - 增强了图片显示的视觉效果

## 使用方式

组件会自动工作，无需额外配置。当用户滚动到 Cases 部分附近时：

1. `useIntersectionObserver` 检测到组件即将可见
2. `useImagePreloader` 开始在空闲时预加载所有行业图片
3. 用户切换行业标签时，图片已经预加载完成，实现瞬时切换

## 性能影响

- **带宽使用**：适度增加，仅在用户可能查看时才预加载
- **内存使用**：轻微增加，图片缓存在浏览器中
- **CPU 使用**：极低，使用空闲时间处理
- **用户体验**：显著提升，图片切换更流畅

## 调试

预加载状态指示器（右上角蓝色脉冲点）可以帮助开发者了解预加载进度。在生产环境中可以通过移除相关代码来隐藏此指示器。
